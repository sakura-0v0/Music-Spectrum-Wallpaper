# Music-Spectrum-Wallpaper

一个基于 Python 的实时音频频谱可视化工具，可以将系统音频输出转换为美观的频谱可视化效果。

注意：只想使用软件的，下载安装包(.exe)安装并运行即可使用，需要学习借鉴的才去下载源码(.zip)

'以下内容由AI生成后本人修改'
## 功能特点

### 音频处理
1. 自动使用系统默认音频设备
2. 实时捕获系统音频输出
3. 对音频进行统一重采样
4. 立体声分别加窗、FFT后合并，可实时配置 FFT 参数
5. 对结果进行加权平均平滑处理
  
- 当你更换默认设备或者修改了设备的采样率、位深度时，软件自动重启

### 外观自定义
- 可自定义柱状图的渐变色
- 峰值指示器自由落体下降
- 粒子发射效果
- 对数频率坐标轴的上下限、密度


### 显示模式
右键系统托盘可设置
- **壁纸模式**：将频谱显示在桌面壁纸上（在图标下方显示）
- **置顶窗口**：始终显示在其他窗口上方
- **锁定窗口**：像歌词一样，不会被鼠标点击
- **窗口大小**：开启后，可调节窗口的大小、位置（关闭窗口大小后，保存窗口的位置、大小）
  
- **推荐的几个配置组合：（始终启用“锁定窗口”）**
1. 壁纸模式 + 置顶窗口（位于其他壁纸软件上方，桌面图标下方，最推荐该组合！！）
2. 什么都不勾选（位于图标上方，所有其他窗口下方）
3. 置顶窗口（像歌词一样）
    


### 配置选项
右键系统托盘，点击“选项”
- 丰富的图形化配置界面
- 实时 FPS 监控
- 音频处理参数调节
- 视觉效果自定义

### 智能控制
- 全屏/最大化应用检测，自动暂停
- 支持设置开机自启
- 当你更换默认设备或者修改了设备的采样率、位深度时，软件自动重启

## 系统要求

- **操作系统**: Windows 10/11
- **Python**: 3.7  (必须3.7！)
- **音频**: WASAPI音频设备

## 项目配置

### 1. 安装 Python 依赖
```
pip install -r requirements.txt
```

  #### 注意：一定不能直接pip install PyAudio,要安装根目录下(requirements.txt)的"PyAudio-0.2.11-cp37-cp37m-win_amd64.whl"！不然无法进行系统内录！


### 2. 运行程序
```
python run.py
```

## 使用说明

### 基本操作
1. 启动程序后，频谱窗口会自动出现
2. 系统托盘会显示程序图标
3. 右键点击托盘图标打开菜单

### 配置界面
- 右键托盘图标，选择"选项"打开配置窗口
- 可调节音频处理、视觉效果等参数
- 修改后部分设置需要重启生效

### 窗口控制
- **锁定窗口**：防止意外移动
- **移动窗口**：临时解锁进行位置调整
- **置顶窗口**：始终显示在最前
- **壁纸模式**：嵌入桌面背景

### 暂停检测
- 程序会自动检测全屏/最大化应用
- 检测到时自动暂停频谱更新，实测暂停后，CPU、GPU占用均为0%
- 可在配置中添加排除列表


## 故障排除

### 常见问题
**性能问题**：降低目标帧率，关闭粒子显示（比较吃CPU），关闭峰值显示（略微吃CPU）
**多显示器下，壁纸模式窗口位置偏移**：右键系统托盘，点击“壁纸偏移”，调整位置偏移量，使得开关壁纸模式时窗口位置保持一致


## 开发信息

### 项目结构
"run.py              # 主程序入口"
"config.py           # 配置管理"
"driver.py           # 音频驱动"
"fft_process.py      # FFT 处理"
"show.py             # 显示窗口"
"config_win.py       # 配置界面"
"check_maxsize.py    # 全屏检测"
"tools.py            # 工具函数"

### 多进程架构
- 主进程：启动，频谱界面
- 音频进程：音频捕获，音频重采样
- FFT 进程：FFT 分别计算、合并，FFT 后的平滑处理
- 配置进程：选项页面


## 技术支持

如有问题请联系开发者：
- QQ/微信：1206985031
- 开发者：一只黄小娥
